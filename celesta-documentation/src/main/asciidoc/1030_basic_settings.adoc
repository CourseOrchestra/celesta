= Базовая настройка Celesta
:lang: ru
:is-main-doc:
include::_doc_general_attributes.adoc[]
:toclevels: 3
:doctype: book
:img: images
:lupa: icon:search[]
:source-highlighter: highlightjs
:toc: left

//image::{img}/

//tag::basic_settings[]

К базовым настройкам Celesta относятся общесистемные параметры, такие как параметры подключения к базе данных и путь к партитуре (score path, определение этому термину см. в разделе <<celesta_vocabulary,Основные понятия>>).

Эти настройки выполняются в .properties-файле системы, в которую встроена Celesta.

WARNING: TODO сделать примеры для Spring Boot


Базовыми настройками Celesta являются:


[cols="1, 2, ^1, 2, ^1", options="header"]
|====
^.^|Параметр
^.^|Назначение
^.^|Обязательный
^.^|Пример значения
^.^|Значение по умолчанию

|score.path
|score path Celesta (список папок, разделённый разделителем путей, специфичным для операционной системы)
|Да
|c:/eDacha/score/;c:/celestabasic
|-

|pylib.path
|путь к папке со стандартными библиотеками Jython
|Нет
|c:/Program Files/Apache Software Foundation/Tomcat 7.0/webapps/edacha/WEB-INF/libJython/
|pylib

|javalib.path
|список папок с .jar-файлами, разделённый разделителем путей, каждый из которых будет добавлен в classpath при запуске Celesta и, как следствие, будет доступен в jython-скриптах
|Нет
|c:/pathto/javalib1;c:/pathto/javalib2
|

|rdbms.connection.url
|URL подключения к JDBC-драйверу
|Да
a|
* jdbc:sqlserver://172.16.1.114:52836;databaseName=celesta;user=sa;password=111

* jdbc:postgresql://127.0.0.1:5432/celesta?user=postgres&password=7464

* jdbc:oracle:thin:celesta/123@192.168.110.128:1521:XE
|-

|rdbms.connection.username
|Логин для подключения к базе данных
|Нет (если не заполнен, используется информация из rdbms.connection.url)
|
|-

|rdbms.connection.password
|Пароль для подключения к базе данных
|Нет (если не заполнен, используется информация из rdbms.connection.url
|
|-

|skip.dbupdate
|Заставляет систему при инициализации полностью пропустить фазу обновления базы данных (включая создание системных таблиц).
Этот параметр категорически не рекомендуется включать, если вы не знаете твёрдо, чего хотите добиться.

Этот параметр требуется при некоторых сценариях разворачивания Celesta на заранее существующей базе данных - например, для работы системы Flute, если в её скриптах не планируется использовать классы Celesta для доступа к данным.
|Нет
|true
|false

|force.dbinitialize
|Заставляет систему при инициализации создавать системные объекты Celesta даже в том случае, если база данных не пустая (уже содержит таблицы).
Этот параметр категорически не рекомендуется включать, если вы не знаете твёрдо, чего хотите добиться, и рекомендуется выключать после того, как база данных будет проинициализирована один раз.

Этот параметр требуется при некоторых сценариях разворачивания Celesta на заранее существующей базе данных.
|Нет
|true
|false

|h2.in-memory
|Значение true заставляет Celesta использовать базу H2 в in-memory режиме. Параметры JDBC подключения при этом игнорируются. Режим необходим, прежде всего, для модульных тестов.
|Нет
|true
|false

|h2.port
|Если указано целочисленное значение, и при этом h2.in-memory установлено в true, то база H2 запускается в виде сервера на указанном порту. Данный режим позволяет присоединяться к базе данных H2 внешним приложениям, читать и модифицировать данные. Параметры JDBC подключения при этом игнорируются. Этот режим необходим для UI и приёмочных автоматических тестов.
|Нет
|true
|false

|h2.referential.integrity
|Использовать ли контроль ссылочной целостности (контроль Foreign Keys), работая с базой H2 в in-memory режиме (для всех других БД данный параметр игнорируется). По умолчанию при работе с H2 in-memory, ссылочная целостность отключается для упрощения создания модульных тестов.
|Нет
|true
|false

|====

*Замечание*: При инициализации celesta в свойство score.path добавляется папка "general/score" с тем, что в ней могут храниться общесистемные гранулы для всех userdat.

//end::basic_settings[]
